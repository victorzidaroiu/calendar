(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var doEventsColide=function doEventsColide(event1,event2){return event1.end>=event2.start&&event1.start<=event2.end};var EventChain=function(){function EventChain(events,eventIndex){var _this=this;_classCallCheck(this,EventChain);this.chain=[eventIndex];this.globalEvents=events;events.forEach(function(event){if(eventIndex!==event.index&&_this.collidesWith(event.index)){_this.addEvent(event.index)}})}_createClass(EventChain,[{key:"print",value:function print(){var _this2=this;console.log("Printing chain: ");this.chain.forEach(function(eventIndex){console.log(_this2.globalEvents[eventIndex])});console.log("-----------------")}},{key:"addEvent",value:function addEvent(eventIndex){this.chain.push(eventIndex)}},{key:"collidesWith",value:function collidesWith(eventIndex){var _this3=this;var collisionDetected=true;this.chain.forEach(function(eventIndex2){if(!doEventsColide(_this3.globalEvents[eventIndex],_this3.globalEvents[eventIndex2])){collisionDetected=false}});return collisionDetected}},{key:"events",get:function get(){return this.chain}}]);return EventChain}();exports.default=EventChain},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(minutes){var hours=Math.floor(minutes/60);return{hour:hours>13?hours-12:hours,minutes:minutes%60||"00"}}},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(low,high){return Math.floor(Math.random()*(high-low)+low)}},{}],4:[function(require,module,exports){"use strict";var _eventChain=require("./calendar/event-chain");var _eventChain2=_interopRequireDefault(_eventChain);var _minutesToTime=require("./helpers/minutes-to-time");var _minutesToTime2=_interopRequireDefault(_minutesToTime);var _randomInt=require("./helpers/random-int");var _randomInt2=_interopRequireDefault(_randomInt);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var startCalendar=function startCalendar(){var events=[];var eventChains=[];var maxEventWidth=600;var startHour=9;var totalHours=12;var calendarEventsElement=document.querySelector(".calendarEvents");var calendarHoursElement=document.querySelector(".calendarHours");function addEvent(eventParam){var event=eventParam;console.log("Adding event:");console.log(event);console.log("------------");event.isDrawn=false;event.width=600;event.left=0;events.push(event);events[events.length-1].index=events.length-1;event.index=events.length-1;var foundCollision=false;eventChains.forEach(function(eventChain){if(eventChain.collidesWith(event.index)){eventChain.addEvent(event.index);foundCollision=true}});if(!foundCollision){eventChains.push(new _eventChain2.default(events,event.index))}}function drawEvent(event){var eventElement=document.createElement("div");var eventElementText=document.createElement("div");eventElementText.className="eventText";eventElementText.innerHTML=event.name||"Sample Item";eventElement.style.top=event.start;eventElement.style.width=event.width;eventElement.style.left=event.left;eventElement.style.height=event.end-event.start;eventElement.appendChild(eventElementText);calendarEventsElement.appendChild(eventElement);events[event.index].isDrawn=true}function renderHours(){for(var i=0;i<=totalHours*2;i+=1){var element=document.createElement("div");var time=(0,_minutesToTime2.default)(startHour*60+i*30);var amPm=time.hour>=startHour&&time.hour<12?"AM":"PM";element.innerHTML=time.hour+": "+time.minutes+" "+amPm;if(time.minutes==="00"){element.className="fullHour"}else{element.className="halfHour"}calendarHoursElement.appendChild(element)}}function canDrawEvent(start,end,drawn){var canDraw=true;drawn.forEach(function(eventIndex){if(end>events[eventIndex].left&&start<events[eventIndex].left+events[eventIndex].width){canDraw=false}});return canDraw}function renderEvents(){eventChains.sort(function(chain1,chain2){if(chain1.events.length>chain2.events.length){return 0}else if(chain1.events.length<chain2.events.length){return 1}return 0});eventChains.forEach(function(eventChain){eventChain.print();var doDraw=[];var drawn=[];var width=maxEventWidth/eventChain.events.length;eventChain.events.forEach(function(eventIndex){if(!events[eventIndex].isDrawn){doDraw.push(eventIndex)}else{width=events[eventIndex].width;drawn.push(eventIndex)}});var positionIndex=0;doDraw.forEach(function(eventIndex){var left=width*positionIndex;var canDraw=canDrawEvent(left,left+width,drawn);while(!canDraw){positionIndex+=1;left=width*positionIndex;canDraw=canDrawEvent(left,left+width,drawn)}events[eventIndex].width=width;events[eventIndex].left=width*positionIndex;positionIndex+=1;drawEvent(events[eventIndex])})})}function layOutDay(eventArray){calendarEventsElement.innerHTML="";calendarHoursElement.innerHTML="";events=[];eventChains=[];eventArray.forEach(addEvent);renderEvents();renderHours()}function generateRandomEvents(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:5;var eventsToAdd=[];for(var i=0;i<n;i+=1){var start=(0,_randomInt2.default)(0,720-30);var end=(0,_randomInt2.default)(start+30,720);eventsToAdd.push({start:start,end:end})}layOutDay(eventsToAdd)}window.layOutDay=layOutDay;window.generateRandomEvents=generateRandomEvents};window.onload=function(){startCalendar();layOutDay([{start:30,end:150},{start:540,end:600},{start:560,end:620},{start:610,end:670}])}},{"./calendar/event-chain":1,"./helpers/minutes-to-time":2,"./helpers/random-int":3}]},{},[4]);